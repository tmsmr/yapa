class YapaConfig{constructor(){this.t=10,this.i=2e3,this.h=1,this.o=1,this.l=2,this.p="#444",this.M=!0,this.v=200,this.u=1,this.Y="#666",this.m=!0,this.C=1e3,this.I=1,this.T="#00FF00",this.H="#0000FF",this.F=1.25,this.N=!0}}class Yapa{constructor(t,s){this.canvas=document.createElement("canvas"),this.g=this.canvas.getContext("2d"),this.k=t,this.k.appendChild(this.canvas),this.P=s}reset(){this.S=window.devicePixelRatio||1,this.canvas.width=this.k.clientWidth*this.S,this.canvas.height=this.k.clientHeight*this.S,1!==this.S&&(this.canvas.style.width=this.k.clientWidth+"px",this.canvas.style.height=this.k.clientHeight+"px"),this.q=this.P.v*this.P.v*this.S*this.S,this.D=0,this.G=[],this.j()}j(){const t=[];var s=[this.canvas.width,this.canvas.height];let i=Math.floor(this.k.clientWidth*this.k.clientHeight/1e4*this.P.h);for(;i--;)t.push(new YapaNode(s,this.P.o*this.S,this.P.l*this.P.F));this.A=t}B(){if(!document.hidden){for(const s of this.A)s.update();this.D<1?this.D+=1/(this.P.i/this.P.t):this.D=1;for(const i of this.G)for(const h of i.J)if(h[2]<100){i.current=h;var t=this.A[h[0]].K(this.A[h[1]]),t=Math.sqrt(t);h[2]+=this.P.I*this.P.v/t*this.S,100<h[2]&&(h[2]=100);break}this.G=this.G.filter(t=>t.J[t.J.length-1][2]<100)}setTimeout(this.B.bind(this),this.P.t)}L(){0<this.A.length&&(this.g.clearRect(0,0,this.canvas.width,this.canvas.height),this.O(),this.P.M&&this.R(),this.P.m&&this.U()),window.requestAnimationFrame(this.L.bind(this))}O(){this.g.globalAlpha=this.D,this.g.fillStyle=this.P.p;for(const t of this.A)this.g.beginPath(),this.g.arc(t.x,t.y,this.P.l*this.S,0,2*Math.PI),this.g.fill()}R(){this.g.strokeStyle=this.P.Y,this.g.lineWidth=this.P.u*this.S;for(let s=0;s<this.A.length;s++)for(let t=s+1;t<this.A.length;t++){const a=this.A[s];var i=this.A[t],h=a.K(i);h>this.q||(this.g.globalAlpha=(1-h/this.q)*this.D,this.g.beginPath(),this.g.moveTo(a.x,a.y),this.g.lineTo(i.x,i.y),this.g.stroke())}}U(){this.g.lineWidth=this.P.u*this.S*this.P.F;for(const a of this.G){this.g.strokeStyle=a.color,this.g.fillStyle=a.color;let t=1;1===a.J.length?t=1-2*Math.abs(a.J[0][2]-50)/100:(a.J[0][2]<100&&(t=a.J[0][2]/100),0<a.J[a.J.length-1][2]&&(t=1-a.J[a.J.length-1][2]/100));for(const o of a.J){const r=this.A[o[0]];var s=this.A[o[1]];this.g.globalAlpha=(1-r.K(s)/this.q+1)/2*this.D*t,this.g.beginPath(),this.g.moveTo(r.x,r.y),this.g.lineTo(s.x,s.y),this.g.stroke()}this.g.globalAlpha=this.D*t,this.g.beginPath(),this.g.arc(this.A[a.J[0][0]].x,this.A[a.J[0][0]].y,this.P.l*this.S*this.P.F,0,2*Math.PI),this.g.fill();for(const e in a.J){var i=this.A[a.J[e][1]];let t=this.P.l*this.S;e===a.J.length-1&&(t*=this.P.F),this.g.beginPath(),this.g.arc(i.x,i.y,t,0,2*Math.PI),this.g.fill()}var h;this.P.N&&(h=[(this.A[a.current[1]].x-this.A[a.current[0]].x)*a.current[2]*.01,(this.A[a.current[1]].y-this.A[a.current[0]].y)*a.current[2]*.01],this.g.beginPath(),this.g.arc(h[0]+this.A[a.current[0]].x,h[1]+this.A[a.current[0]].y,this.P.l*this.P.F*this.S,0,2*Math.PI),this.g.fill())}}V(){if(!document.hidden&&2<=this.A.length){var s=Math.floor(Math.random()*this.A.length);let t=s;for(;s===t;)t=Math.floor(Math.random()*this.A.length);var i,h=this.W(s,t);h&&(i=YapaColorHelpers.X(this.P.T,this.P.H),this.G.push(new YapaTransmission(h,i)))}setTimeout(this.V.bind(this),Math.random()*this.P.C)}W(i,h){this.A.forEach(t=>t.Z());let a=i;for(this.A[a].$=0;;){let s=void 0;for(let t=0;t<this.A.length;t++){var o;a===t||this.A[t]._||((o=this.A[a].K(this.A[t]))>this.q||(o=Math.sqrt(o),(o+=this.A[a].$)<this.A[t].$&&(this.A[t].$=o,this.A[t].parent=a),(!s||o<s[1])&&(s=[t,o])))}if(this.A[a]._=!0,s)a=s[0];else{let s=void 0;for(let t=0;t<this.A.length;t++)this.A[t]._||(!s||this.A[t].$<s[1])&&(s=[t,this.A[t].$]);if(!s){const r=[];r.push(h);let t=this.A[h].parent;for(;t!==i;){if(void 0===t)return;r.push(t),t=this.A[t].parent}return r.push(t),r.reverse()}a=s[0]}}}start(){this.reset(),this.B(),this.P.m&&this.V(),this.L(),window.addEventListener("resize",this.reset.bind(this))}}class YapaNode{constructor(t,s,i){this.tt=t,this.x=Math.floor(Math.random()*(this.tt[0]-i)),this.x<i&&(this.x=i),this.y=Math.floor(Math.random()*(this.tt[1]-i)),this.y<i&&(this.y=i),this.dx=(Math.random()-.5)*s,this.dy=(Math.random()-.5)*s,this.padding=i,this._=void 0,this.$=void 0,this.parent=void 0}update(){(this.x+this.dx+this.padding>this.tt[0]||this.x+this.dx-this.padding<0)&&(this.dx=-this.dx),(this.y+this.dy+this.padding>this.tt[1]||this.y+this.dy-this.padding<0)&&(this.dy=-this.dy),this.x+=this.dx,this.y+=this.dy}K(t){var s=this.x-t.x,t=this.y-t.y;return s*s+t*t}Z(){this._=!1,this.$=1/0,this.parent=void 0}}class YapaTransmission{constructor(s,t){this.J=[];for(let t=1;t<s.length;t++)this.J.push([s[t-1],s[t],0]);this.current=this.J[0],this.color=t}}class YapaColorHelpers{static st(t){return 1===(t=(t=Math.ceil(t)).toString(16)).length?"0"+t:t}static X(t,s){t=t.replace("#",""),s=s.replace("#","");var i=Math.random(),h=parseInt(t.substring(0,2),16)*i+parseInt(s.substring(0,2),16)*(1-i),a=parseInt(t.substring(2,4),16)*i+parseInt(s.substring(2,4),16)*(1-i),t=parseInt(t.substring(4,6),16)*i+parseInt(s.substring(4,6),16)*(1-i);return"#"+YapaColorHelpers.st(h)+YapaColorHelpers.st(a)+YapaColorHelpers.st(t)}}
